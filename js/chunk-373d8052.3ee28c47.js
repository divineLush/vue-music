(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-373d8052"],{"04d1":function(e,t,n){var r=n("342f"),o=r.match(/firefox\/(\d+)/i);e.exports=!!o&&+o[1]},"25f0":function(e,t,n){"use strict";var r=n("6eeb"),o=n("825a"),c=n("d039"),s=n("ad6d"),a="toString",i=RegExp.prototype,u=i[a],l=c((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=a;(l||d)&&r(RegExp.prototype,a,(function(){var e=o(this),t=String(e.source),n=e.flags,r=String(void 0===n&&e instanceof RegExp&&!("flags"in i)?s.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},"4e82":function(e,t,n){"use strict";var r=n("23e7"),o=n("1c0b"),c=n("7b0b"),s=n("50c4"),a=n("d039"),i=n("addb"),u=n("a640"),l=n("04d1"),d=n("d998"),b=n("2d00"),m=n("512c"),f=[],h=f.sort,g=a((function(){f.sort(void 0)})),p=a((function(){f.sort(null)})),O=u("sort"),v=!a((function(){if(b)return b<70;if(!(l&&l>3)){if(d)return!0;if(m)return m<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)f.push({k:t+r,v:n})}for(f.sort((function(e,t){return t.v-e.v})),r=0;r<f.length;r++)t=f[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}})),j=g||!p||!O||!v,x=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:String(t)>String(n)?1:-1}};r({target:"Array",proto:!0,forced:j},{sort:function(e){void 0!==e&&o(e);var t=c(this);if(v)return void 0===e?h.call(t):h.call(t,e);var n,r,a=[],u=s(t.length);for(r=0;r<u;r++)r in t&&a.push(t[r]);a=i(a,x(e)),n=a.length,r=0;while(r<n)t[r]=a[r++];while(r<u)delete t[r++];return t}})},"512c":function(e,t,n){var r=n("342f"),o=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!o&&+o[1]},"8dc3":function(e,t,n){"use strict";n.r(t);n("b0c0");var r=n("7a23"),o={class:"w-full mb-8 py-14 text-center text-white relative"},c=Object(r["h"])("div",{class:"absolute inset-0 w-full h-full box-border bg-contain music-bg",style:{"background-image":"url(/assets/img/song-header.png)"}},null,-1),s={class:"container mx-auto flex items-center"},a=Object(r["h"])("i",{class:"fas fa-play"},null,-1),i={class:"z-50 text-left ml-8"},u={class:"text-3xl font-bold"},l={class:"container mx-auto mt-6"},d={class:"bg-white rounded border border-gray-200 relative flex flex-col"},b={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},m={class:"card-title"},f=Object(r["h"])("i",{class:"fa fa-comments float-right text-green-400 text-2xl"},null,-1),h={class:"p-6"},g=Object(r["h"])("option",{value:"0"},"Latest",-1),p=Object(r["h"])("option",{value:"1"},"Oldest",-1),O={class:"container mx-auto",id:"comments"},v={class:"mb-5"},j={class:"font-bold"};function x(e,t,n,x,w,y){var C=Object(r["z"])("vee-field"),k=Object(r["z"])("ErrorMessage"),I=Object(r["z"])("vee-form");return Object(r["u"])(),Object(r["d"])(r["a"],null,[Object(r["h"])("section",o,[c,Object(r["h"])("div",s,[Object(r["h"])("button",{type:"button",class:"z-50 h-24 w-24 text-3xl bg-white text-black rounded-full focus:outline-none",onClick:t[1]||(t[1]=Object(r["K"])((function(t){return e.newSong(w.song)}),["prevent"]))},[a]),Object(r["h"])("div",i,[Object(r["h"])("div",u,Object(r["C"])(w.song.modifiedName),1),Object(r["h"])("div",null,Object(r["C"])(w.song.genre),1)])])]),Object(r["h"])("section",l,[Object(r["h"])("div",d,[Object(r["h"])("div",b,[Object(r["h"])("span",m,Object(r["C"])(y.commentCount),1),f]),Object(r["h"])("div",h,[w.isAlertVisible?(Object(r["u"])(),Object(r["d"])("div",{key:0,class:["text-white text-center font-bold p-4 mb-4",w.alertVariant]},Object(r["C"])(w.alertMessage),3)):Object(r["e"])("",!0),e.isUserLoggedIn?(Object(r["u"])(),Object(r["d"])(I,{key:1,"validation-schema":w.schema,onSubmit:y.submitComment},{default:Object(r["I"])((function(){return[Object(r["h"])(C,{as:"textarea",name:"comment",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition\n              duration-500 focus:outline-none focus:border-black rounded mb-4",placeholder:"Your comment here..."}),Object(r["h"])(k,{class:"text-red-600",name:"comment"}),Object(r["h"])("button",{type:"submit",class:"py-1.5 px-3 rounded text-white bg-green-600",disabled:w.isCommentInSubmission}," Submit ",8,["disabled"])]})),_:1},8,["validation-schema","onSubmit"])):Object(r["e"])("",!0),Object(r["J"])(Object(r["h"])("select",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return w.sortOrder=e}),class:"block mt-4 py-1.5 px-3 text-gray-800 border border-gray-300 transition\n          duration-500 focus:outline-none focus:border-black rounded"},[g,p],512),[[r["F"],w.sortOrder]])])])]),Object(r["h"])("ul",O,[(Object(r["u"])(!0),Object(r["d"])(r["a"],null,Object(r["y"])(y.sortedComments,(function(e){return Object(r["u"])(),Object(r["d"])("li",{class:"p-6 bg-gray-50 border border-gray-200",key:e.docID},[Object(r["h"])("div",v,[Object(r["h"])("div",j,Object(r["C"])(e.name),1),Object(r["h"])("time",null,Object(r["C"])(e.datePosted),1)]),Object(r["h"])("p",null,Object(r["C"])(e.content),1)])})),128))])],64)}var w=n("1da1"),y=n("5530"),C=(n("96cf"),n("4e82"),n("fb6a"),n("d3b7"),n("25f0"),n("159b"),n("b79f")),k=n("5502"),I={name:"Song",data:function(){return{isCommentInSubmission:!1,isAlertVisible:!1,sortOrder:0,alertVariant:"bg-blue-500",alertMessage:"Please wait! Your comment is being submitted.",song:{},schema:{comment:"required|min:3"},comments:[]}},computed:Object(y["a"])(Object(y["a"])({},Object(k["e"])({isUserLoggedIn:function(e){return e.auth.isUserLoggedIn}})),{},{routeID:function(){return this.$route.params.id},sortedComments:function(){var e=this;return this.comments.slice().sort((function(t,n){var r=new Date(t.datePosted),o=new Date(n.datePosted);return"0"===e.sortOrder?o-r:r-o}))},commentCount:function(){var e="undefined"!==typeof this.song.commentCount?this.song.commentCount:"";return"Comments (".concat(e,")")}}),beforeRouteEnter:function(e,t,n){return Object(w["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,C["c"].doc(e.params.id).get();case 2:r=t.sent,n((function(e){if(r.exists){var t=e.$route.query.sort,n="0"===t||"1"===t;e.sortOrder=n?t:"0",e.song=r.data(),e.getComments()}else e.$router.push({name:"home"})}));case 4:case"end":return t.stop()}}),t)})))()},methods:Object(y["a"])(Object(y["a"])({},Object(k["b"])(["newSong"])),{},{submitComment:function(e,t){var n=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var o,c,s,a,i,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=e.comment,c=t.resetForm,n.isUserLoggedIn){r.next=4;break}return r.abrupt("return");case 4:return n.isCommentInSubmission=!0,n.isAlertVisible=!0,n.alertVariant="bg-500-blue",n.alertMessage="Please wait! Your comment is being submitted.",s=C["a"].currentUser,a=s.displayName,i=s.uid,u={uid:i,name:a,content:o,datePosted:(new Date).toString(),songID:n.routeID},r.next=12,C["b"].add(u);case 12:return n.song.commentCount+=1,r.next=15,C["c"].doc(n.routeID).update({commentCount:n.song.commentCount});case 15:n.getComments(),n.isCommentInSubmission=!1,n.alertVariant="bg-green-500",n.alertMessage="Comment added!",c();case 20:case"end":return r.stop()}}),r)})))()},getComments:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,C["b"].where("songID","==",e.routeID).get();case 2:n=t.sent,e.comments=[],n.forEach((function(t){e.comments.push(Object(y["a"])({docID:t.id},t.data()))}));case 5:case"end":return t.stop()}}),t)})))()}}),watch:{sortOrder:function(e){e!==this.$route.query.sort&&this.$router.push({query:{sort:e}})}}};I.render=x;t["default"]=I},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},addb:function(e,t){var n=Math.floor,r=function(e,t){var s=e.length,a=n(s/2);return s<8?o(e,t):c(r(e.slice(0,a),t),r(e.slice(a),t),t)},o=function(e,t){var n,r,o=e.length,c=1;while(c<o){r=c,n=e[c];while(r&&t(e[r-1],n)>0)e[r]=e[--r];r!==c++&&(e[r]=n)}return e},c=function(e,t,n){var r=e.length,o=t.length,c=0,s=0,a=[];while(c<r||s<o)c<r&&s<o?a.push(n(e[c],t[s])<=0?e[c++]:t[s++]):a.push(c<r?e[c++]:t[s++]);return a};e.exports=r},d998:function(e,t,n){var r=n("342f");e.exports=/MSIE|Trident/.test(r)},fb6a:function(e,t,n){"use strict";var r=n("23e7"),o=n("861d"),c=n("e8b5"),s=n("23cb"),a=n("50c4"),i=n("fc6a"),u=n("8418"),l=n("b622"),d=n("1dde"),b=d("slice"),m=l("species"),f=[].slice,h=Math.max;r({target:"Array",proto:!0,forced:!b},{slice:function(e,t){var n,r,l,d=i(this),b=a(d.length),g=s(e,b),p=s(void 0===t?b:t,b);if(c(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!c(n.prototype)?o(n)&&(n=n[m],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return f.call(d,g,p);for(r=new(void 0===n?Array:n)(h(p-g,0)),l=0;g<p;g++,l++)g in d&&u(r,l,d[g]);return r.length=l,r}})}}]);
//# sourceMappingURL=chunk-373d8052.3ee28c47.js.map